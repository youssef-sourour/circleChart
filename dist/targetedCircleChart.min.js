!function(t){"use strict";t.fn.circleChart=function(e){const i={color:"#3459eb",backgroundColor:"#e6e6e6",background:!0,speed:2e3,widthRatio:1,value:e.value?e:1,previousValue:0,unit:"percent",targetOee:.75,producedPartCount:0,theoricalPartCount:0,textIn:!1,startAngle:0,counterclockwise:!1,size:110,animate:!0,backgroundFix:!0,lineCap:"round",animation:"easeInOutCubic",text:function(){return!1},textColor:{valueColor:"#ffffff",percentSymbolColor:"#ffffff",producedPartCountColor:"#ffffff",partsTextColor:"#ffffff",partsBehindTextColor:"#ffffff"},redraw:!1,cAngle:0,textCenter:!0,textSize:!1,textWeight:"normal",textFamily:"Roboto, Arial, sans-serif",relativeTextSize:1/7,autoCss:!0,onDraw:!1};let s={linearTween:(t,e,i,s)=>i*t/s+e,easeInQuad:(t,e,i,s)=>i*(t/=s)*t+e,easeOutQuad:(t,e,i,s)=>-i*(t/=s)*(t-2)+e,easeInOutQuad:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,easeInCubic:(t,e,i,s)=>i*(t/=s)*t*t+e,easeOutCubic:(t,e,i,s)=>(t/=s,i*(--t*t*t+1)+e),easeInOutCubic:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e,easeInQuart:(t,e,i,s)=>i*(t/=s)*t*t*t+e,easeOutQuart:(t,e,i,s)=>(t/=s,-i*(--t*t*t*t-1)+e),easeInOutQuart:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e,easeInQuint:(t,e,i,s)=>i*(t/=s)*t*t*t*t+e,easeOutQuint:(t,e,i,s)=>(t/=s,i*(--t*t*t*t*t+1)+e),easeInOutQuint:(t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,easeInSine:(t,e,i,s)=>-i*Math.cos(t/s*(Math.PI/2))+i+e,easeOutSine:(t,e,i,s)=>i*Math.sin(t/s*(Math.PI/2))+e,easeInOutSine:(t,e,i,s)=>-i/2*(Math.cos(Math.PI*t/s)-1)+e,easeInExpo:(t,e,i,s)=>i*Math.pow(2,10*(t/s-1))+e,easeOutExpo:(t,e,i,s)=>i*(1-Math.pow(2,-10*t/s))+e,easeInOutExpo:(t,e,i,s)=>(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(2-Math.pow(2,-10*t))+e),easeInCirc:(t,e,i,s)=>(t/=s,-i*(Math.sqrt(1-t*t)-1)+e)};s.easeOutCubic=((t,e,i,s)=>(t/=s,i*(--t*t*t+1)+e)),s.easeInOutCubic=((t,e,i,s)=>(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e),s.easeOutCirc=((t,e,i,s)=>(t/=s,t--,i*Math.sqrt(1-t*t)+e)),s.easeInOutCirc=((t,e,i,s)=>(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:(t-=2,i/2*(Math.sqrt(1-t*t)+1)+e));let a=(t,e,i,s,n,r,o,l)=>{let c=Object.create(a.prototype);return c.pos=t,c.bAngle=e,c.eAngle=i,c.cAngle=s,c.radius=n,c.lineWidth=r,c.sAngle=o,c.settings=l,c};a.prototype={onDraw(t){if(!1!==this.settings.onDraw){let e=Object.assign({},this),i={percent:c,rad:t=>t,default:r};e.value=(i[this.settings.unit]||i.default)(e.cAngle),e.text=(e=>n(t,e)),e.settings.onDraw(t,e)}},drawBackground(t){t.beginPath(),t.arc(this.pos,this.pos,this.settings.backgroundFix?.9999*this.radius:this.radius,0,2*Math.PI),t.lineWidth=this.settings.backgroundFix?.95*this.lineWidth:this.lineWidth,t.strokeStyle=this.settings.backgroundColor,t.stroke()},draw(t){if(t.beginPath(),this.settings.counterclockwise){let e=2*Math.PI;t.arc(this.pos,this.pos,this.radius,e-this.bAngle,e-(this.bAngle+this.cAngle),this.settings.counterclockwise)}else t.arc(this.pos,this.pos,this.radius,this.bAngle,this.bAngle+this.cAngle,this.settings.counterclockwise);t.lineWidth=this.lineWidth,t.lineCap=this.settings.lineCap,t.strokeStyle=this.settings.color,t.stroke()},drawTarget(t){t.beginPath();let e=this.settings.backgroundFix?.95*this.lineWidth/2:this.lineWidth/2,i=this.pos+this.radius*Math.cos(Math.PI/180*(360*this.settings.targetOee-90)),s=this.pos+this.radius*Math.sin(Math.PI/180*(360*this.settings.targetOee-90)),a=0*Math.PI,n=2*Math.PI;t.arc(i,s,e,a,n);let r=this.settings.value>=this.settings.targetOee?this.settings.backgroundColor:"#ffffff";t.fillStyle=r,t.fill()},animate(t,e,i,a,n){let r=(new Date).getTime()-i;r<1&&(r=1),i-a<1.05*this.settings.speed&&(!n&&1e3*this.cAngle<=Math.floor(1e3*this.eAngle)||n&&1e3*this.cAngle>=Math.floor(1e3*this.eAngle))?(this.cAngle=s[this.settings.animation]((i-a)/r,this.sAngle,this.eAngle-this.sAngle,this.settings.speed/r),e.clearRect(0,0,this.settings.size,this.settings.size),this.settings.background&&this.drawBackground(e),this.draw(e),this.drawTarget(e),this.onDraw(t),i=(new Date).getTime(),h(()=>this.animate(t,e,i,a,n))):(this.cAngle=this.eAngle,e.clearRect(0,0,this.settings.size,this.settings.size),this.settings.background&&this.drawBackground(e),this.draw(e),this.drawTarget(e),this.setCurrentAnglesData(t),this.drawTarget(e))},setCurrentAnglesData(t){let e={percent:c,rad:t=>t,default:r},i=e[this.settings.unit]||e.default;t.data("current-c-angle",i(this.cAngle)),t.data("current-start-angle",i(this.bAngle))}};let n=(e,i)=>{e.data("text",i),t(".circleChart_text",e).html(i)},r=t=>t/Math.PI*180,o=t=>t/180*Math.PI,l=t=>o(t/100*360),c=t=>r(t)/360*100,h=(t=>window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})();return this.each((s,n)=>{let r=t(n),c={},g=r.data();for(let t in g)g.hasOwnProperty(t)&&0===t.indexOf("_cache_")&&i.hasOwnProperty(t.substring(7))&&(c[t.substring(7)]=g[t]);let u=Object.assign({},i,c,g,e);for(let t in u)u.hasOwnProperty(t)&&0!==t.indexOf("_cache_")&&r.data("_cache_"+t,u[t]);if(t("canvas.circleChart_canvas",r).length||(r.append(function(){return t("<canvas/>",{class:"circleChart_canvas"}).prop({width:u.size,height:u.size}).css(u.autoCss?{"margin-left":"auto","margin-right":"auto",display:"block"}:{})}),(t=>{let e=t.getContext("2d"),i=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),s=t.width,a=t.height;t.width=s*i,t.height=a*i,t.style.width=s+"px",t.style.height=a+"px",e.scale(i,i)})(t("canvas",r).get(0))),t("p.circleChart_text",r).length)u.textIn&&(t(".circleChart_part_count",r).text(u.producedPartCount),t(".circleChart_value",r).contents().filter(function(){return 3==this.nodeType}).first().replaceWith(Math.round(100*u.value/u.targetOee)));else{let e="";try{e=u.text()}catch(t){throw Error("You have to set theoricalPartCount")}u.textIn&&(r.append("<p class='circleChart_text'>"+`<span class='circleChart_value'> ${Math.round(100*u.value/u.targetOee)} <sup class='unit_percent'>%</sup></span>`+`<span class='circleChart_part_count'> ${u.producedPartCount} </span>`+"<span class='circleChart_part_text'>PARTS</span>"+`<p class='circleChart-text-behind'> ${u.text()} </p>`),u.autoCss&&u.textCenter&&(t("p.circleChart_text",r).css({display:"block",position:"absolute",top:0,left:0,"text-align":"center",width:"100%",padding:0,"vertical-align":"middle","font-family":u.textFamily}),t("span.circleChart_value",r).css({display:"block",width:"100%","line-height":`${u.size/3.625}px`,"font-size":`${u.size/3.625}px`,"margin-top":`${u.size/3.625/2}px`,"font-weight":"bold",color:u.textColor.valueColor}),t("sup.unit_percent",r).css({color:u.textColor.percentSymbolColor,"text-align":"center",width:"42px","font-size":"0.44em"}),t("span.circleChart_part_count",r).css({"line-height":`${u.size/4.66}px`,"font-size":`${u.size/4.66}px`,"margin-top":`${u.size/4.66/6}px`,color:u.textColor.producedPartCountColor,display:"block",width:"100%","font-weight":"bold","text-align":"center"}),t("span.circleChart_part_text",r).css({color:u.textColor.partsTextColor,"line-height":`${u.size/13.05}px`,"font-size":`${u.size/13.05}px`,"margin-top":`${u.size/13.05/2}px`,"text-align":"center",display:"block",width:"100%","font-weight":"lighter"}),t("p.circleChart-text-behind",r).css({"font-size":`${u.size/18.64}px`,"margin-top":`${u.size/16.31}px`,color:u.textColor.partsBehindTextColor,height:"28px","text-align":"center","font-weight":"bold"})))}u.autoCss&&r.css("position","relative"),u.redraw||(u.cAngle=u.currentCAngle?u.currentCAngle:u.cAngle,u.startAngle=u.currentStartAngle?u.currentStartAngle:u.startAngle);let d=t("canvas",r).get(0).getContext("2d"),p={percent:l,rad:t=>t,default:o},f=p[u.unit]||p.default,w=f(u.startAngle),x=f(100*u.value),C=f(u.cAngle),b=u.size/2,A=b*(1-u.widthRatio/2),m=A*u.widthRatio,k=a(b,w,x,C,A,m,C,u);r.data("size",u.size),u.animate?0!==u.value?k.animate(r,d,(new Date).getTime(),(new Date).getTime(),C>x):h(()=>{d.clearRect(0,0,u.size,u.size),k.settings.background&&k.drawBackground(d),k.onDraw(r)}):(k.cAngle=k.eAngle,h(()=>{d.clearRect(0,0,u.size,u.size),u.background&&k.drawBackground(d),0!==u.value?(k.draw(d),k.drawTarget(d),k.setCurrentAnglesData(r)):k.settings.background&&k.drawBackground(d),k.onDraw(r)}))})}}(jQuery);